<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.camp.going.mapper.ReservationMapper">

    <insert id="reservationSave">


        INSERT INTO reservation
        (
        user_id
        , camp_id
        , reg_date
        , reg_dates
        )
        VALUES
        (
          #{userId}
        , #{campId}
        , #{regDate}
        , #{regDates}
        )


    </insert>

    <select id="selectReservation" resultType="reservation">

        SELECT

            reservation_number
            , user_id
            , camp_id
            , reg_date
            , reg_dates

        FROM

            reservation

        ORDER BY

        user_id = #{userId};

    </select>

    <select id="reservationCamping" resultType="reservation">

        SELECT
            u.email,
            c.camp_name,
            r.reg_date,
            r.reg_dates,
            c.camp_price,
            u.phone_number
        FROM reservation r
        LEFT JOIN user u
        ON r.email = u.email
        LEFT JOIN camping c
        ON r.camp_id = c.camp_id;

    </select>


    <select id="findReservation" resultType="reservation"
            parameterType="map">

        SELECT
            reservation_number
            , user_id
            , camp_id
            , reg_date
            , reg_dates
        FROM
            reservation
        WHERE
            reservation_number = #{reservationNumber}

    </select>


    <delete id="delete">

        DELETE FROM reservation
        WHERE camp_id = #{campId}

    </delete>




</mapper>